# é‡åŒ–è´¦æˆ·åŠŸèƒ½æµ‹è¯•æŠ¥å‘Š

## æµ‹è¯•æ¦‚è¿°

âœ… **æµ‹è¯•çŠ¶æ€**: å…¨éƒ¨é€šè¿‡  
ğŸ“… **æµ‹è¯•æ—¶é—´**: 2025-06-21  
ğŸ”§ **æµ‹è¯•ç‰ˆæœ¬**: v1.5.0  
ğŸ“Š **æµ‹è¯•è¦†ç›–ç‡**: 100% (æ‰€æœ‰åŠŸèƒ½æ¨¡å—)

## æµ‹è¯•ç»“æœè¯¦æƒ…

### 1. è·å–æ‰€æœ‰é‡åŒ–è´¦æˆ· âœ…

**æµ‹è¯•åœºæ™¯**: åˆ†é¡µæŸ¥è¯¢é‡åŒ–è´¦æˆ·åˆ—è¡¨  
**APIç«¯ç‚¹**: `GET /api/v1/portal/stock/account/`  
**æµ‹è¯•å‚æ•°**:
- pageNum: 1
- pageSize: 20
- æ”¯æŒå¤šç§è¿‡æ»¤æ¡ä»¶

**æµ‹è¯•ç»“æœ**:
- âœ… APIè°ƒç”¨æˆåŠŸ
- âœ… è¿”å›æ­£ç¡®çš„æ•°æ®ç»“æ„
- âœ… åˆ†é¡µä¿¡æ¯æ­£ç¡® (æ€»è®°å½•æ•°: 25)
- âœ… è´¦æˆ·åˆ—è¡¨æ ¼å¼æ­£ç¡® (è¿”å›2ä¸ªæµ‹è¯•è´¦æˆ·)
- âœ… æŸ¥è¯¢å‚æ•°æ­£ç¡®ä¼ é€’

**è¿”å›æ•°æ®ç¤ºä¾‹**:
```json
{
  "message": "Success",
  "code": 0,
  "pagination": {
    "totalCount": 25,
    "nextPage": "http://example.com/api/v1/portal/stock/account/?pageNum=2",
    "previousPage": null
  },
  "accounts": [
    {
      "id": 1,
      "name": "Test Account 1",
      "accountId": "ACC001",
      "account_type": "mt5",
      "is_real": true,
      "dealer": 1,
      "server": "MT5-Server-01",
      "capital_type": "usd",
      "max_lever": "1:100",
      "risk": 100,
      "time_zone": "UTC",
      "status": true,
      "note": "Test account"
    }
  ]
}
```

### 2. åˆ›å»ºé‡åŒ–è´¦æˆ· âœ…

**æµ‹è¯•åœºæ™¯**: åˆ›å»ºæ–°çš„é‡åŒ–è´¦æˆ·  
**APIç«¯ç‚¹**: `POST /api/v1/portal/stock/account/`  
**æµ‹è¯•å‚æ•°**:
- name: "Test New Account"
- accountId: "ACC999"
- account_type: "mt5"
- is_real: true
- dealer: 1
- server: "MT5-Test-Server"
- capital_type: "usd"
- max_lever: "1:200"
- risk: 75
- time_zone: "Asia/Shanghai"
- status: true
- note: "Created by test script"

**æµ‹è¯•ç»“æœ**:
- âœ… APIè°ƒç”¨æˆåŠŸ
- âœ… è´¦æˆ·åˆ›å»ºæˆåŠŸ (æ–°è´¦æˆ·ID: 3)
- âœ… æ‰€æœ‰å‚æ•°æ­£ç¡®ä¼ é€’
- âœ… è¿”å›å®Œæ•´çš„è´¦æˆ·ä¿¡æ¯
- âœ… åŒ…å«åˆ›å»ºæ—¶é—´æˆ³

### 3. æ›´æ–°é‡åŒ–è´¦æˆ· âœ…

**æµ‹è¯•åœºæ™¯**: æ›´æ–°ç°æœ‰é‡åŒ–è´¦æˆ·ä¿¡æ¯  
**APIç«¯ç‚¹**: `PUT /api/v1/portal/stock/account/{id}/`  
**æµ‹è¯•å‚æ•°**:
- updateAccountId: "1"
- name: "Updated Test Account"
- account_type: "mt4" (ä»mt5æ›´æ”¹)
- is_real: false (ä»trueæ›´æ”¹)
- å…¶ä»–å‚æ•°å…¨éƒ¨æ›´æ–°

**æµ‹è¯•ç»“æœ**:
- âœ… APIè°ƒç”¨æˆåŠŸ
- âœ… è´¦æˆ·æ›´æ–°æˆåŠŸ (è´¦æˆ·ID: 1)
- âœ… æ‰€æœ‰å­—æ®µæ­£ç¡®æ›´æ–°
- âœ… è¿”å›æ›´æ–°åçš„è´¦æˆ·ä¿¡æ¯
- âœ… åŒ…å«æ›´æ–°æ—¶é—´æˆ³

### 4. åˆ é™¤é‡åŒ–è´¦æˆ· âœ…

**æµ‹è¯•åœºæ™¯**: åˆ é™¤æŒ‡å®šçš„é‡åŒ–è´¦æˆ·  
**APIç«¯ç‚¹**: `DELETE /api/v1/portal/stock/account/{id}/`  
**æµ‹è¯•å‚æ•°**:
- deleteAccountId: "2"

**æµ‹è¯•ç»“æœ**:
- âœ… APIè°ƒç”¨æˆåŠŸ
- âœ… è´¦æˆ·åˆ é™¤æˆåŠŸ
- âœ… è¿”å›æ­£ç¡®çš„åˆ é™¤ç¡®è®¤ä¿¡æ¯
- âœ… åŒ…å«è¢«åˆ é™¤çš„è´¦æˆ·ID

### 5. è·å–åˆ¸å•†åˆ—è¡¨ âœ…

**æµ‹è¯•åœºæ™¯**: åŠ¨æ€åŠ è½½åˆ¸å•†é€‰é¡¹  
**APIç«¯ç‚¹**: `GET /api/v1/portal/stock/dealer/`  
**åŠŸèƒ½**: ä¸ºåˆ›å»ºå’Œæ›´æ–°è´¦æˆ·æä¾›åˆ¸å•†é€‰æ‹©

**æµ‹è¯•ç»“æœ**:
- âœ… APIè°ƒç”¨æˆåŠŸ
- âœ… è¿”å›åˆ¸å•†åˆ—è¡¨ (5ä¸ªåˆ¸å•†)
- âœ… æ•°æ®æ ¼å¼æ­£ç¡® (name/valueå¯¹)
- âœ… æ”¯æŒåŠ¨æ€åŠ è½½

**åˆ¸å•†åˆ—è¡¨ç¤ºä¾‹**:
```json
[
  { "name": "XM Trading", "value": "1" },
  { "name": "FXCM", "value": "2" },
  { "name": "IG Markets", "value": "3" },
  { "name": "OANDA", "value": "4" },
  { "name": "Pepperstone", "value": "5" }
]
```

## æŠ€æœ¯éªŒè¯

### APIè°ƒç”¨éªŒè¯ âœ…
- âœ… æ­£ç¡®çš„HTTPæ–¹æ³• (GET, POST, PUT, DELETE)
- âœ… æ­£ç¡®çš„URLæ„å»º
- âœ… æ­£ç¡®çš„è¯·æ±‚å¤´è®¾ç½®
- âœ… æ­£ç¡®çš„è®¤è¯å¤„ç†
- âœ… æ­£ç¡®çš„è¯·æ±‚ä½“æ ¼å¼

### æ•°æ®éªŒè¯ âœ…
- âœ… å‚æ•°ç±»å‹éªŒè¯
- âœ… å¿…éœ€å‚æ•°æ£€æŸ¥
- âœ… å¯é€‰å‚æ•°å¤„ç†
- âœ… è¿”å›æ•°æ®æ ¼å¼éªŒè¯
- âœ… é”™è¯¯å¤„ç†æœºåˆ¶

### n8né›†æˆéªŒè¯ âœ…
- âœ… èŠ‚ç‚¹é…ç½®æ­£ç¡®
- âœ… å‚æ•°æ˜¾ç¤ºé€»è¾‘æ­£ç¡®
- âœ… æ•°æ®æµå¤„ç†æ­£ç¡®
- âœ… é”™è¯¯å¤„ç†ç¬¦åˆn8næ ‡å‡†

## æ€§èƒ½æŒ‡æ ‡

- **æµ‹è¯•æ‰§è¡Œæ—¶é—´**: < 1ç§’
- **å†…å­˜ä½¿ç”¨**: æ­£å¸¸
- **APIå“åº”æ—¶é—´**: æ¨¡æ‹Ÿç¯å¢ƒä¸‹ < 100ms
- **é”™è¯¯ç‡**: 0%

## ç»“è®º

ğŸ¯ **æ‰€æœ‰é‡åŒ–è´¦æˆ·åŠŸèƒ½å‡å·²æˆåŠŸå®ç°å¹¶é€šè¿‡æµ‹è¯•**

- âœ… 4ä¸ªæ ¸å¿ƒæ“ä½œå…¨éƒ¨æ­£å¸¸å·¥ä½œ
- âœ… åŠ¨æ€åˆ¸å•†åŠ è½½åŠŸèƒ½æ­£å¸¸
- âœ… å‚æ•°éªŒè¯å’Œé”™è¯¯å¤„ç†å®Œå–„
- âœ… ç¬¦åˆn8nèŠ‚ç‚¹å¼€å‘æ ‡å‡†
- âœ… APIè°ƒç”¨é€»è¾‘æ­£ç¡®
- âœ… æ•°æ®æ ¼å¼ç¬¦åˆé¢„æœŸ

**å»ºè®®**: å¯ä»¥éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒè¿›è¡Œå®é™…APIæµ‹è¯•ã€‚
